<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>The Useless Dictionary</title>
  <meta name="description" content="The Useless Dictionary">
  <meta name="author" content="Reece Yang">

  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Text&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Crimson Text', serif;
    }

    body {
      background-color: #ffe8d6;
    }

    section {
      margin: 20rem auto;
      max-width: 800px;
      text-align: center;
      font-size: 14pt;
    }

    input {
      margin: 2rem auto;
    }

    p {
      padding: 0.2em;
      text-align: center;
      opacity: 0;
      animation: fadein 2s;
      animation-fill-mode: forwards;
    };

    p .startfade {
      opacity: 1;
    }

    @keyframes fadein {
      from {opacity: 0;}
      to {opacity: 1;}
    }
  </style>

</head>

<body>
  <section>
  <h1>The Useless Dictionary</h1>
  <form onsubmit="return false">
    <label for="fname">look up a word:</label>
    <input href="#" type="text" id="word-input" autocomplete="off">
    <a href="#" id="define-button" style="color: #2d6a4f;">define</a>
  </form>
  <div id="def-box">
  </div>
  <section>
</body>

<script>
// add learn more definitions to def-box
var learnMore = document.createElement("a");
learnMore.id = "learn-more";
learnMore.href = "#";
learnMore.innerHTML = "learn more";
learnMore.style.color = "#2d6a4f";
var learnMoreClicked = false;
learnMore.onclick = function() {
  if (!learnMoreClicked) {
    var word = document.getElementById("word-input").value;
    word.split("").forEach((char, i) => {
      addLine(document.createTextNode(char + " means " + char), i + "s")
    });
    learnMoreClicked = true;
  }
};

// add definition to def-box
function defineWord() {
  document.getElementById("word-input").select();

  document.getElementById("def-box").innerHTML = "";
  var word = document.getElementById("word-input").value;
  addLine(document.createTextNode(word + " means " + word), "0s");

  addLine(learnMore, "1s");
  learnMoreClicked = false;
};

// define the word onclick or when enter key is pressed
document.getElementById("define-button").onclick = function(){defineWord()};
document.getElementById("word-input").addEventListener("keyup", function(event) {
    if (event.key === "Enter") {
      defineWord();
    }
});

// add a line that fades in with delay
function addLine(node, delay) {
  var defNode = document.createElement("p");
  defNode.appendChild(node);
  defNode.style.animationDelay = delay;
  defNode.classList.add("startfade");
  document.getElementById("def-box").appendChild(defNode);
}
</script>

</html>
